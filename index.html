<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
    <title>SMARTFIX CENTRE | Premium Apple Store</title>
    
    <!-- Google Fonts: Plus Jakarta Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- VARIABLES & RESET --- */
        :root {
            /* Palette */
            --primary: #1d1d1f;
            --primary-soft: #86868b;
            --accent: #0071e3;
            --accent-hover: #0077ed;
            --accent-bg: #f5f9ff;
            --gold: #d4af37;
            --bg-body: #fbfbfd;
            --surface: #ffffff;
            --surface-glass: rgba(255, 255, 255, 0.75);
            --border-light: #e5e5ea;
            --text-main: #1d1d1f;
            --text-secondary: #86868b;
            --danger: #ff3b30;
            
            /* UI */
            --radius-md: 16px;
            --radius-lg: 24px;
            --radius-pill: 999px;
            --shadow-sm: 0 4px 12px rgba(0,0,0,0.04);
            --shadow-md: 0 12px 32px rgba(0,0,0,0.08);
            --header-height: 60px;
            --transition-smooth: cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        html { scroll-behavior: smooth; scroll-padding-top: 100px; } 
        
        body { 
            background-color: var(--bg-body); 
            color: var(--text-main); 
            padding-top: var(--header-height); 
            padding-bottom: env(safe-area-inset-bottom);
            overflow-x: hidden; 
            -webkit-font-smoothing: antialiased; 
            -moz-osx-font-smoothing: grayscale;
        }

        /* --- UTILITIES --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; position: relative; }
        .hidden { display: none !important; }
        .flex-center { display: flex; align-items: center; justify-content: center; }
        
        /* Fade Animation */
        .fade-in-up { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease, transform 0.6s ease; }
        .fade-in-up.visible { opacity: 1; transform: translateY(0); }

        /* --- BUTTONS --- */
        .btn { 
            padding: 14px 28px; border-radius: var(--radius-pill); 
            font-weight: 600; font-size: 0.95rem; text-decoration: none; 
            cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; 
            border: none; display: inline-flex; align-items: center; gap: 8px; justify-content: center;
            letter-spacing: -0.01em;
        }
        .btn:active { transform: scale(0.96); }

        .btn-primary { background: var(--primary); color: white; box-shadow: var(--shadow-sm); }
        .btn-primary:hover { background: #000; box-shadow: var(--shadow-md); }

        .btn-accent { background: var(--accent); color: white; box-shadow: 0 4px 16px rgba(0, 113, 227, 0.25); }
        .btn-accent:hover { background: var(--accent-hover); box-shadow: 0 6px 20px rgba(0, 113, 227, 0.35); }

        .btn-outline { background: white; border: 1px solid var(--border-light); color: var(--primary); }
        .btn-outline:hover { border-color: var(--primary); background: var(--bg-body); }

        .btn-text { background: transparent; color: var(--accent); padding: 8px 16px; font-weight: 600; }
        .btn-text:hover { text-decoration: underline; }

        /* --- HEADER --- */
        header { 
            position: fixed; top: 12px; left: 50%; transform: translateX(-50%); 
            width: 94%; max-width: 1000px; height: 56px; z-index: 1000; 
            background: var(--surface-glass); backdrop-filter: saturate(180%) blur(20px); 
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            border: 1px solid rgba(0,0,0,0.05); 
            border-radius: var(--radius-pill); 
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease; 
        }
        .nav-container { display: flex; justify-content: space-between; align-items: center; height: 100%; padding: 0 24px; }
        
        .logo { display: flex; align-items: center; gap: 10px; text-decoration: none; cursor: pointer; transition: opacity 0.2s; }
        .logo:hover { opacity: 0.7; }
        .logo-img { height: 24px; width: auto; object-fit: contain; }
        .logo-text { font-weight: 800; font-size: 0.95rem; color: var(--primary); letter-spacing: -0.3px; }
        .logo-text span { color: var(--accent); }

        .nav-links { display: flex; gap: 4px; }
        .nav-item { 
            font-size: 0.8rem; color: var(--text-secondary); cursor: pointer; 
            padding: 8px 14px; border-radius: var(--radius-pill); transition: 0.2s; font-weight: 500;
        }
        .nav-item:hover { color: var(--primary); background: rgba(0,0,0,0.04); }
        .nav-item.active { color: var(--primary); background: rgba(0,0,0,0.08); font-weight: 600; }

        .header-actions { display: flex; gap: 12px; align-items: center; }
        .cart-btn { position: relative; background: rgba(0,0,0,0.03); border: none; cursor: pointer; font-size: 1rem; color: var(--primary); width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .cart-btn:hover { background: rgba(0,0,0,0.08); transform: scale(1.05); }
        .cart-badge { position: absolute; top: 0; right: 0; background: var(--accent); color: white; font-size: 0.55rem; width: 14px; height: 14px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; border: 1.5px solid white; opacity: 0; transform: scale(0); transition: 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .cart-badge.visible { opacity: 1; transform: scale(1); }

        .mobile-toggle { display: none; background: none; border: none; font-size: 1.1rem; color: var(--primary); cursor: pointer; width: 36px; height: 36px; border-radius: 50%; }

        /* --- MOBILE MENU --- */
        .mobile-menu {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: rgba(255,255,255,0.98); backdrop-filter: blur(30px);
            z-index: 1050; display: flex; flex-direction: column;
            justify-content: center; align-items: center; gap: 40px;
            transform: translateY(-100%); transition: transform 0.5s cubic-bezier(0.32, 0.72, 0, 1);
        }
        .mobile-menu.active { transform: translateY(0); }
        .mobile-link { font-size: 2rem; font-weight: 700; color: var(--primary); text-decoration: none; transition: 0.2s; }
        .mobile-link:hover { color: var(--accent); }
        .mobile-close { position: absolute; top: 24px; right: 24px; background: none; border: none; font-size: 2rem; color: var(--text-main); cursor: pointer; }

        /* ========================
           COMPONENTS
           ======================== */
        
        /* CUSTOM DROPDOWN (For Filter) */
        .filter-header-container {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 40px; position: sticky; top: 80px; z-index: 50;
            padding-top: 10px; background: var(--bg-body); /* Blending fix */
        }

        .custom-dropdown {
            position: relative; width: 240px; font-size: 0.95rem;
        }
        .dropdown-trigger {
            width: 100%; padding: 12px 20px;
            background: white; border: 1px solid var(--border-light);
            border-radius: var(--radius-pill);
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; font-weight: 600; color: var(--primary);
            box-shadow: var(--shadow-sm); transition: 0.2s;
        }
        .dropdown-trigger:hover { border-color: var(--primary); }
        .dropdown-trigger i { transition: transform 0.3s; font-size: 0.8rem; color: var(--text-secondary); }
        .custom-dropdown.open .dropdown-trigger i { transform: rotate(180deg); }
        .custom-dropdown.open .dropdown-trigger { border-color: var(--accent); }

        .dropdown-options {
            position: absolute; top: 110%; left: 0; width: 100%;
            background: white; border-radius: var(--radius-md);
            box-shadow: var(--shadow-md); border: 1px solid var(--border-light);
            opacity: 0; visibility: hidden; transform: translateY(-10px);
            transition: 0.2s ease; z-index: 100; overflow: hidden;
        }
        .custom-dropdown.open .dropdown-options {
            opacity: 1; visibility: visible; transform: translateY(0);
        }
        .dropdown-item {
            padding: 12px 20px; cursor: pointer; font-weight: 500;
            color: var(--text-secondary); transition: 0.1s;
            display: flex; justify-content: space-between; align-items: center;
        }
        .dropdown-item:hover { background: var(--accent-bg); color: var(--accent); }
        .dropdown-item.selected { color: var(--primary); font-weight: 700; background: rgba(0,0,0,0.03); }
        .dropdown-item.selected::after { content: '\f00c'; font-family: 'Font Awesome 6 Free'; font-weight: 900; font-size: 0.8rem; color: var(--accent); }

        /* HERO SLIDESHOW */
        .hero-section { margin-top: -12px; }
        .hero-slideshow { height: 85vh; width: 100%; position: relative; overflow: hidden; background: #000; border-bottom-left-radius: 32px; border-bottom-right-radius: 32px; }
        .slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 1s ease; display: flex; align-items: center; justify-content: center; }
        .slide.active { opacity: 1; z-index: 2; }
        .slide-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.4; transition: transform 10s ease; }
        .slide.active .slide-bg { transform: scale(1); opacity: 0.3; } 
        .slide-content { position: relative; z-index: 3; text-align: center; color: white; max-width: 800px; padding: 20px; }
        .slide-title { font-size: 3.5rem; font-weight: 700; margin-bottom: 16px; letter-spacing: -0.03em; line-height: 1.1; }
        .slide-subtitle { font-size: 1.4rem; margin-bottom: 40px; font-weight: 500; opacity: 0.9; }
        
        .slider-control { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border: none; color: white; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; z-index: 10; transition: 0.3s; display: flex; align-items: center; justify-content: center; }
        .slider-control:hover { background: white; color: black; transform: translateY(-50%) scale(1.1); }
        .slider-dots { position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; z-index: 10; }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: rgba(255,255,255,0.3); cursor: pointer; transition: 0.3s; }
        .dot.active { background: white; width: 24px; border-radius: 10px; }

        /* COLLECTION LIST VIEW */
        .page-section { padding: 60px 0 100px; min-height: 100vh; }
        .section-title { font-size: 2.5rem; font-weight: 700; color: var(--primary); margin-bottom: 8px; letter-spacing: -0.02em; }
        .section-desc { color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 40px; }

        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 24px; }
        
        .model-card {
            background: white; border: 1px solid var(--border-light); border-radius: var(--radius-lg);
            padding: 32px; text-align: center; cursor: pointer; transition: all 0.3s ease;
            position: relative; overflow: hidden; display: flex; flex-direction: column; align-items: center;
        }
        .model-card:hover { transform: translateY(-6px); box-shadow: var(--shadow-md); border-color: transparent; }
        
        .model-img-wrap { width: 140px; height: 180px; margin-bottom: 24px; display: flex; align-items: center; justify-content: center; }
        .model-img { max-width: 100%; max-height: 100%; object-fit: contain; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.15)); transition: 0.3s; }
        .model-card:hover .model-img { transform: scale(1.05) translateY(-5px); }
        
        .model-name { font-size: 1.4rem; font-weight: 700; color: var(--primary); margin-bottom: 4px; }
        .model-price { font-size: 1rem; color: var(--text-secondary); font-weight: 500; margin-bottom: 20px; }
        .model-btn-link { font-size: 0.9rem; color: var(--accent); font-weight: 600; display: flex; align-items: center; gap: 6px; opacity: 0; transform: translateY(10px); transition: 0.3s; }
        .model-card:hover .model-btn-link { opacity: 1; transform: translateY(0); }

        /* DETAIL VIEW */
        #collection-detail-view { max-width: 1100px; margin: 0 auto; padding: 20px 0; }
        .back-btn { display: inline-flex; align-items: center; gap: 8px; color: var(--text-secondary); font-weight: 600; cursor: pointer; transition: 0.2s; background: none; border: none; font-size: 1rem; margin-bottom: 30px; }
        .back-btn:hover { color: var(--primary); transform: translateX(-5px); }

        .detail-container { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; }
        
        .detail-image-box { 
            background: linear-gradient(180deg, #ffffff 0%, #f5f5f7 100%); 
            border-radius: 40px; height: 600px; 
            display: flex; align-items: center; justify-content: center; 
            position: relative; overflow: hidden;
        }
        .detail-image-box img { max-width: 80%; max-height: 85%; object-fit: contain; filter: drop-shadow(0 20px 40px rgba(0,0,0,0.1)); }

        .detail-info h1 { font-size: 3.5rem; font-weight: 700; color: var(--primary); line-height: 1.1; margin-bottom: 12px; letter-spacing: -0.03em; }
        .detail-desc { font-size: 1.25rem; color: var(--text-secondary); margin-bottom: 32px; font-weight: 400; }
        
        .sku-label { font-size: 0.8rem; font-weight: 700; text-transform: uppercase; color: var(--text-secondary); letter-spacing: 0.8px; margin-bottom: 16px; display: block; }
        .sku-options { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 40px; }
        
        .sku-opt {
            background: white; border: 1.5px solid var(--border-light); border-radius: 16px;
            padding: 16px; text-align: center; cursor: pointer; transition: all 0.2s;
        }
        .sku-opt:hover { border-color: var(--primary); box-shadow: var(--shadow-sm); }
        .sku-opt.active { border-color: var(--accent); background: var(--accent-bg); box-shadow: 0 0 0 2px white inset; }
        .sku-cap { font-weight: 700; color: var(--primary); font-size: 1rem; display: block; }
        .sku-price { font-size: 0.9rem; color: var(--text-secondary); margin-top: 4px; display: block; }
        .sku-opt.active .sku-cap { color: var(--accent); }

        .price-large { font-size: 2.5rem; font-weight: 600; color: var(--primary); margin-bottom: 40px; letter-spacing: -0.02em; }

        /* STICKY MOBILE ACTIONS */
        .mobile-sticky-actions {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: rgba(255,255,255,0.9); backdrop-filter: blur(20px);
            border-top: 1px solid var(--border-light);
            padding: 16px 24px; padding-bottom: max(16px, env(safe-area-inset-bottom));
            display: none; gap: 12px; z-index: 900;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.05);
        }
        .mobile-sticky-actions.active { display: flex; }
        .mobile-sticky-actions .btn { flex: 1; padding: 14px; }

        /* LOCATIONS & PROMO */
        .promo-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 32px; margin-top: 40px; }
        .promo-card { background: white; border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow-sm); transition: 0.3s; border: 1px solid var(--border-light); }
        .promo-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-md); }
        .promo-img { width: 100%; height: 200px; object-fit: cover; }
        .promo-body { padding: 24px; }
        .promo-tag { background: var(--accent-bg); color: var(--accent); padding: 4px 10px; border-radius: 6px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; display: inline-block; margin-bottom: 10px; }
        .promo-title { font-size: 1.2rem; font-weight: 700; margin-bottom: 8px; color: var(--primary); }

        /* CART & MODALS */
        .cart-drawer { position: fixed; top: 0; right: 0; width: 100%; height: 100%; background: white; z-index: 2000; transform: translateX(100%); transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); display: flex; flex-direction: column; box-shadow: -10px 0 50px rgba(0,0,0,0.1); }
        @media(min-width: 769px) { .cart-drawer { width: 400px; } }
        .cart-drawer.open { transform: translateX(0); }
        .cart-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.3); backdrop-filter: blur(4px); z-index: 1999; opacity: 0; pointer-events: none; transition: 0.3s; }
        .cart-overlay.open { opacity: 1; pointer-events: auto; }

        .cart-item { display: flex; gap: 16px; padding: 16px 0; border-bottom: 1px solid var(--border-light); }
        .cart-item img { width: 70px; height: 70px; border-radius: 12px; object-fit: contain; border: 1px solid var(--border-light); background: #fafafa; }
        
        /* TOAST */
        #toast {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(20px);
            background: rgba(29, 29, 31, 0.9); color: white; padding: 12px 24px; border-radius: 50px;
            z-index: 3000; opacity: 0; visibility: hidden; transition: 0.3s; font-weight: 500;
            display: flex; align-items: center; gap: 10px; backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); font-size: 0.9rem;
        }
        #toast.visible { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }

        /* DISCLAIMER */
        #disclaimer-modal { 
            position: fixed; inset: 0; background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); 
            z-index: 9999; display: flex; align-items: center; justify-content: center; 
            opacity: 0; visibility: hidden; transition: 0.5s; 
        }
        #disclaimer-modal.visible { opacity: 1; visibility: visible; }
        .disclaimer-content { background: white; width: 90%; max-width: 500px; border-radius: 30px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.15); border: 1px solid rgba(0,0,0,0.05); text-align: center; }

        /* RESPONSIVE */
        @media(max-width: 900px) {
            .detail-container { grid-template-columns: 1fr; gap: 40px; }
            .detail-image-box { height: 400px; order: -1; }
            .detail-info h1 { font-size: 2.5rem; }
        }

        @media(max-width: 768px) {
            :root { --header-height: 54px; }
            html { scroll-padding-top: 70px; }
            
            header { top: 8px; width: 96%; height: 48px; border-radius: 20px; }
            .nav-links { display: none; }
            .mobile-toggle { display: block; }
            .logo-text { font-size: 0.85rem; }
            
            .hero-slideshow { height: 70vh; border-radius: 0; }
            .slide-title { font-size: 2.2rem; }
            
            .section-title { font-size: 1.8rem; }
            .product-grid { grid-template-columns: 1fr; }
            
            .custom-dropdown { width: 100%; }
            .sku-options { grid-template-columns: 1fr 1fr; }
            
            .price-large { margin-bottom: 0; display: none; } /* Hide large price on mobile, keep in button */
            
            footer { text-align: center; padding: 60px 20px; }
        }
    </style>
</head>
<body>

    <!-- DISCLAIMER -->
    <div id="disclaimer-modal">
        <div class="disclaimer-content">
            <i class="fa-solid fa-circle-info" style="font-size:3rem; color:var(--accent); margin-bottom:20px;"></i>
            <h3 style="margin-bottom:15px; font-size:1.5rem;">Notice</h3>
            <p style="color:var(--text-secondary); margin-bottom:30px; line-height:1.6;">
                This is a demonstration website by <strong>DDNetwork One</strong>.<br>
                All products and prices are for illustrative purposes.
            </p>
            <label style="display:flex; justify-content:center; gap:10px; margin-bottom:25px; cursor:pointer;">
                <input type="checkbox" id="agree-check" onchange="toggleStart()" style="width:18px; height:18px; accent-color:var(--accent);">
                <span style="font-weight:600;">I understand</span>
            </label>
            <button id="start-btn" class="btn btn-primary" onclick="closeDisclaimer()" disabled style="width:100%;">Enter Store</button>
        </div>
    </div>

    <!-- TOAST -->
    <div id="toast"><i class="fa-solid fa-check" style="color:#34c759;"></i> Added to Cart</div>

    <!-- MOBILE MENU -->
    <div class="mobile-menu" id="mobile-menu">
        <button class="mobile-close" onclick="toggleMobileMenu()"><i class="fa-solid fa-xmark"></i></button>
        <a onclick="nav('home'); toggleMobileMenu()" class="mobile-link">Home</a>
        <a onclick="nav('collection'); toggleMobileMenu()" class="mobile-link">Collection</a>
        <a onclick="nav('locations'); toggleMobileMenu()" class="mobile-link">Locations</a>
    </div>

    <!-- CART -->
    <div class="cart-overlay" id="cart-overlay" onclick="toggleCart()"></div>
    <div class="cart-drawer" id="cart-drawer">
        <div style="padding:24px; border-bottom:1px solid var(--border-light); display:flex; justify-content:space-between; align-items:center;">
            <h3 style="font-size:1.1rem;">Your Bag</h3>
            <button onclick="toggleCart()" style="background:none; border:none; font-size:1.2rem; cursor:pointer;"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div id="cart-items" style="flex:1; overflow-y:auto; padding:24px;">
            <!-- Items Inject Here -->
        </div>
        <div style="padding:24px; border-top:1px solid var(--border-light); background:#fafafa;">
            <div style="display:flex; justify-content:space-between; font-weight:700; font-size:1.2rem; margin-bottom:20px;">
                <span>Total</span>
                <span id="cart-total">RM 0</span>
            </div>
            <button onclick="checkout()" class="btn btn-accent" style="width:100%; justify-content:center;">
                Checkout <i class="fa-brands fa-whatsapp"></i>
            </button>
        </div>
    </div>

    <!-- HEADER -->
    <header>
        <div class="nav-container">
            <div class="logo" onclick="nav('home')">
                <img src="https://scontent.fpen1-2.fna.fbcdn.net/v/t39.30808-6/503708323_122105365760891190_7153034634267293488_n.jpg?_nc_cat=104&_nc_sid=86c6b0&_nc_ohc=xntFbncyJwcQ7kNvwHzrEwA&_nc_oc=AdlAEg4DtvQNkcUv5A82zHDEpGKKBZgrsjqGtvEWIYD7YycfZQ7qWz18hNSg9M6EDRkid-4yKKVlupSmKyo1JQk3&_nc_zt=23&_nc_ht=scontent.fpen1-2.fna&_nc_gid=1B7Nge6QmsB9VM-yVd4s-g&oh=00_Afr2QJx7P87SLZLKEjiXuo5k-oWQ1x1kJqdfcdu0JhdV1g&oe=696E436E" class="logo-img" alt="Logo">
                <div class="logo-text">SMARTFIX<span>CENTRE</span></div>
            </div>

            <nav class="nav-links">
                <a onclick="nav('home')" class="nav-item active">Home</a>
                <a onclick="nav('collection')" class="nav-item">Collection</a>
                <a onclick="nav('locations')" class="nav-item">Locations</a>
            </nav>

            <div class="header-actions">
                <button class="cart-btn" onclick="toggleCart()">
                    <i class="fa-solid fa-bag-shopping"></i>
                    <div class="cart-badge" id="cart-count">0</div>
                </button>
                <button class="mobile-toggle" onclick="toggleMobileMenu()"><i class="fa-solid fa-bars"></i></button>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main>
        <!-- HOME -->
        <section id="home">
            <div class="hero-section">
                <div class="hero-slideshow" id="slider">
                    <button class="slider-control prev" onclick="slide(-1)"><i class="fa-solid fa-chevron-left"></i></button>
                    <button class="slider-control next" onclick="slide(1)"><i class="fa-solid fa-chevron-right"></i></button>
                    <div class="slider-dots" id="dots"></div>
                </div>
            </div>

            <div class="container" style="padding-top:80px; padding-bottom:80px;">
                <div style="text-align:center; max-width:600px; margin:0 auto;">
                    <h2 class="section-title">Why SmartFix?</h2>
                    <p class="section-desc">Premium service, original parts, and expert care.</p>
                </div>

                <div class="promo-grid" id="promo-root"></div>
            </div>
        </section>

        <!-- COLLECTION -->
        <section id="collection" class="page-section hidden">
            <div class="container">
                
                <!-- LIST VIEW -->
                <div id="list-view">
                    <div class="filter-header-container">
                        <h2 class="section-title" style="margin-bottom:0;">The Collection</h2>
                        
                        <!-- CUSTOM DROPDOWN -->
                        <div class="custom-dropdown" id="filter-dropdown">
                            <div class="dropdown-trigger" onclick="toggleDropdown()">
                                <span id="selected-filter-text">All Models</span>
                                <i class="fa-solid fa-chevron-down"></i>
                            </div>
                            <div class="dropdown-options">
                                <div class="dropdown-item selected" onclick="filterProducts('all', this)">All Models</div>
                                <div class="dropdown-item" onclick="filterProducts('16', this)">iPhone 16 Series</div>
                                <div class="dropdown-item" onclick="filterProducts('15', this)">iPhone 15 Series</div>
                                <div class="dropdown-item" onclick="filterProducts('14', this)">iPhone 14 Series</div>
                                <div class="dropdown-item" onclick="filterProducts('13', this)">iPhone 13 Series</div>
                                <div class="dropdown-item" onclick="filterProducts('12', this)">iPhone 12 Series</div>
                                <div class="dropdown-item" onclick="filterProducts('11', this)">iPhone 11 Series</div>
                            </div>
                        </div>
                    </div>

                    <div class="product-grid" id="product-grid-root">
                        <!-- Products rendered here -->
                    </div>
                </div>

                <!-- DETAIL VIEW -->
                <div id="detail-view" class="hidden">
                    <button class="back-btn" onclick="closeDetailView()">
                        <i class="fa-solid fa-arrow-left"></i> Back
                    </button>
                    
                    <div class="detail-container">
                        <div class="detail-image-box">
                            <img id="detail-img" src="" alt="Product">
                        </div>
                        
                        <div class="detail-info">
                            <h1 id="detail-title">iPhone 15</h1>
                            <p id="detail-desc" class="detail-desc">Titanium design. A7 chip. Incredible battery life.</p>
                            
                            <div class="price-large" id="detail-price-display">RM 2,099</div>

                            <span class="sku-label">Select Capacity</span>
                            <div class="sku-options" id="sku-container">
                                <!-- SKUs Injected via JS -->
                            </div>

                            <!-- Desktop Actions -->
                            <div class="actions-desktop" style="display:flex; gap:16px;">
                                <button class="btn btn-outline" onclick="addToCartCurrent()">
                                    Add to Cart
                                </button>
                                <button class="btn btn-accent" onclick="buyNowCurrent()">
                                    Order Now <i class="fa-brands fa-whatsapp"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- LOCATIONS -->
        <section id="locations" class="page-section hidden">
            <div class="container" style="text-align:center;">
                <h2 class="section-title">Our Outlets</h2>
                <p class="section-desc">Visit us at any of our premium locations.</p>
                
                <div class="product-grid" id="loc-grid-root" style="margin-top:40px; text-align:left;"></div>
            </div>
        </section>
    </main>

    <!-- MOBILE STICKY FOOTER FOR DETAIL VIEW -->
    <div class="mobile-sticky-actions" id="mobile-actions">
        <button class="btn btn-outline" onclick="addToCartCurrent()">Add</button>
        <button class="btn btn-accent" onclick="buyNowCurrent()">Order â€¢ <span id="mobile-action-price">RM 0</span></button>
    </div>

    <!-- JAVASCRIPT -->
    <script>
        /* --- DATA --- */
        const products = [
            { id: 'p16', model: 'iPhone 16', series: '16', img: 'https://www.apple.com/v/iphone-16/c/images/overview/hero/hero_intro_endframe__cb4w0x0f3uee_large.png', desc: 'Built for Apple Intelligence.', skus: [
                {cap: '128GB', price: 2499}, {cap: '256GB', price: 2799}, {cap: 'Plus', price: 2899}
            ]},
            { id: 'p15', model: 'iPhone 15', series: '15', img: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-15-finish-select-202309-6-1inch-pink?wid=5120&hei=2880&fmt=webp&.v=1693345394069', desc: 'Titanium. So strong. So light.', skus: [
                {cap: '128GB', price: 2099}, {cap: '256GB', price: 2399}, {cap: 'Plus', price: 2299}
            ]},
            { id: 'p14', model: 'iPhone 14', series: '14', img: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-14-finish-select-202209-6-1inch-midnight?wid=5120&hei=2880&fmt=webp&.v=1660743273166', desc: 'Wonder awaits.', skus: [
                {cap: '128GB', price: 1399}, {cap: '256GB', price: 1699}, {cap: 'Plus', price: 1699}
            ]},
            { id: 'p13', model: 'iPhone 13', series: '13', img: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-13-finish-select-202207-6-1inch-blue?wid=5120&hei=2880&fmt=webp&.v=1654890581631', desc: 'Your new superpower.', skus: [
                {cap: '128GB', price: 1199}, {cap: '256GB', price: 1299}, {cap: '512GB', price: 1599}
            ]},
            { id: 'p12', model: 'iPhone 12', series: '12', img: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-12-purple-select-202107?wid=940&hei=1112&fmt=png-alpha&.v=1625703380000', desc: 'Blast past fast.', skus: [
                {cap: '128GB', price: 899}, {cap: '256GB', price: 999}
            ]},
            { id: 'p11', model: 'iPhone 11', series: '11', img: 'https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-11-hero-select-201909?wid=940&hei=1112&fmt=png-alpha&.v=1566953101465', desc: 'All the new. Twice the performance.', skus: [
                {cap: '64GB', price: 699}, {cap: '128GB', price: 799}
            ]}
        ];

        const promos = [
            { title: 'Free 5G SIM', tag: 'Promo', img: 'https://images.unsplash.com/photo-1556761175-5973dc0f32e7?auto=format&fit=crop&w=600&q=80' },
            { title: 'Screen Protector 50% Off', tag: 'Service', img: 'https://images.unsplash.com/photo-1601593346740-925612772716?auto=format&fit=crop&w=600&q=80' },
            { title: 'Trade-In Bonus', tag: 'Event', img: 'https://images.unsplash.com/photo-1510557880182-3d4d3cba35a5?auto=format&fit=crop&w=600&q=80' }
        ];

        const locations = [
            { name: "Bukit Banyan", tag: "HQ", addr: "No 1, Jalan BB 1/2, Bukit Banyan, Kedah" },
            { name: "Sungai Petani", tag: "Main", addr: "33, Jln Petri 1, Taman Petri, Kedah" },
            { name: "Kulim", tag: "Retail", addr: "12, Jalan Tunku Putra, Kulim, Kedah" },
            { name: "Bertam", tag: "Retail", addr: "Bertam Indah, Kepala Batas, Penang" },
            { name: "Cheras", tag: "KL", addr: "Cheras Sentral Mall, Kuala Lumpur" },
            { name: "Seremban 2", tag: "New", addr: "Seremban 2, Negeri Sembilan" }
        ];

        /* --- STATE --- */
        let cart = [];
        let activeProduct = null;
        let activeSku = null;

        /* --- INIT --- */
        window.onload = () => {
            setTimeout(() => document.getElementById('disclaimer-modal').classList.add('visible'), 400);
            initSlider();
            renderPromos();
            renderProducts();
            renderLocations();
            setupIntersectionObserver();
        };

        /* --- NAVIGATION --- */
        function nav(sectionId) {
            document.querySelectorAll('main > section').forEach(el => el.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');
            
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            // Find link corresponding to section
            const links = document.querySelectorAll('.nav-item');
            if(sectionId === 'home') links[0].classList.add('active');
            if(sectionId === 'collection') links[1].classList.add('active');
            if(sectionId === 'locations') links[2].classList.add('active');

            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Clean up Detail view if leaving collection
            if(sectionId !== 'collection') {
                document.getElementById('mobile-actions').classList.remove('active');
            }
        }

        /* --- SLIDER --- */
        function initSlider() {
            const slider = document.getElementById('slider');
            const dotsContainer = document.getElementById('dots');
            
            promos.forEach((p, i) => {
                // Create Slide
                const slide = document.createElement('div');
                slide.className = `slide ${i === 0 ? 'active' : ''}`;
                slide.innerHTML = `
                    <img src="${p.img}" class="slide-bg">
                    <div class="slide-content">
                        <h1 class="slide-title">${p.title}</h1>
                        <p class="slide-subtitle">${p.tag}</p>
                        <button onclick="nav('collection')" class="btn btn-primary" style="margin-top:24px;">Shop Now</button>
                    </div>
                `;
                slider.prepend(slide); // Prepend so buttons stay on top

                // Create Dot
                const dot = document.createElement('div');
                dot.className = `dot ${i === 0 ? 'active' : ''}`;
                dot.onclick = () => setSlide(i);
                dotsContainer.appendChild(dot);
            });
        }

        let slideIndex = 0;
        function slide(n) {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');
            slides[slideIndex].classList.remove('active');
            dots[slideIndex].classList.remove('active');
            
            slideIndex = (slideIndex + n + slides.length) % slides.length;
            
            slides[slideIndex].classList.add('active');
            dots[slideIndex].classList.add('active');
        }
        function setSlide(n) {
            slideIndex = n - 1; // adjust index before next slide call
            slide(1);
        }
        setInterval(() => slide(1), 5000);

        /* --- FILTER & PRODUCT LIST --- */
        function toggleDropdown() {
            document.getElementById('filter-dropdown').classList.toggle('open');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('filter-dropdown');
            if (!dropdown.contains(e.target)) {
                dropdown.classList.remove('open');
            }
        });

        function filterProducts(series, btnElement) {
            // Update Dropdown UI
            document.querySelectorAll('.dropdown-item').forEach(el => el.classList.remove('selected'));
            btnElement.classList.add('selected');
            
            // Update Text
            const text = btnElement.innerText;
            document.getElementById('selected-filter-text').innerText = text;
            
            // Render Grid
            renderProducts(series);
        }

        function renderProducts(filter = 'all') {
            const grid = document.getElementById('product-grid-root');
            grid.innerHTML = '';
            
            const filtered = filter === 'all' ? products : products.filter(p => p.series === filter);
            
            filtered.forEach(p => {
                const minPrice = Math.min(...p.skus.map(s => s.price));
                const card = document.createElement('div');
                card.className = 'model-card fade-in-up';
                card.innerHTML = `
                    <div class="model-img-wrap">
                        <img src="${p.img}" class="model-img">
                    </div>
                    <div class="model-name">${p.model}</div>
                    <div class="model-price">From RM ${minPrice}</div>
                    <div class="model-btn-link">View Details <i class="fa-solid fa-arrow-right"></i></div>
                `;
                card.onclick = () => openDetail(p);
                grid.appendChild(card);
            });
            
            // Re-trigger observer
            setupIntersectionObserver();
        }

        function setupIntersectionObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));
        }

        /* --- PRODUCT DETAIL LOGIC --- */
        function openDetail(product) {
            activeProduct = product;
            activeSku = product.skus[0]; // Select first SKU by default
            
            // Populate UI
            document.getElementById('detail-img').src = product.img;
            document.getElementById('detail-title').innerText = product.model;
            document.getElementById('detail-desc').innerText = product.desc;
            updatePriceDisplay();
            
            // Render SKUs
            const skuContainer = document.getElementById('sku-container');
            skuContainer.innerHTML = product.skus.map((sku, index) => `
                <div class="sku-opt ${index === 0 ? 'active' : ''}" onclick="selectSku(this, ${index})">
                    <span class="sku-cap">${sku.cap}</span>
                    <span class="sku-price">RM ${sku.price}</span>
                </div>
            `).join('');
            
            // Switch View
            document.getElementById('list-view').classList.add('hidden');
            document.getElementById('detail-view').classList.remove('hidden');
            
            // Handle Mobile Sticky Bar
            if(window.innerWidth <= 768) {
                document.getElementById('mobile-actions').classList.add('active');
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function closeDetailView() {
            document.getElementById('detail-view').classList.add('hidden');
            document.getElementById('list-view').classList.remove('hidden');
            document.getElementById('mobile-actions').classList.remove('active');
            activeProduct = null;
        }

        function selectSku(el, index) {
            document.querySelectorAll('.sku-opt').forEach(e => e.classList.remove('active'));
            el.classList.add('active');
            activeSku = activeProduct.skus[index];
            updatePriceDisplay();
        }

        function updatePriceDisplay() {
            const price = `RM ${activeSku.price}`;
            document.getElementById('detail-price-display').innerText = price;
            document.getElementById('mobile-action-price').innerText = price;
        }

        /* --- CART LOGIC --- */
        function addToCartCurrent() {
            if(!activeSku) return;
            const item = {
                id: Date.now(),
                model: activeProduct.model,
                cap: activeSku.cap,
                price: activeSku.price,
                img: activeProduct.img
            };
            cart.push(item);
            updateCartUI();
            showToast();
        }

        function buyNowCurrent() {
            // Direct Order without adding to cart
            const item = activeProduct;
            const sku = activeSku;
            const msg = `Hi SmartFix, I'd like to order:\n*${item.model} (${sku.cap})* - RM ${sku.price}`;
            window.open(`https://wa.me/60123456789?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function updateCartUI() {
            const countBadge = document.getElementById('cart-count');
            countBadge.innerText = cart.length;
            countBadge.classList.toggle('visible', cart.length > 0);
            
            const root = document.getElementById('cart-items');
            const totalEl = document.getElementById('cart-total');
            
            if(cart.length === 0) {
                root.innerHTML = '<div style="text-align:center; margin-top:50px; color:#999;">Your bag is empty.</div>';
                totalEl.innerText = 'RM 0';
                return;
            }
            
            let total = 0;
            root.innerHTML = cart.map(item => {
                total += item.price;
                return `
                    <div class="cart-item">
                        <img src="${item.img}">
                        <div style="flex:1;">
                            <div style="font-weight:700; color:var(--primary);">${item.model}</div>
                            <div style="font-size:0.9rem; color:var(--text-secondary);">${item.cap}</div>
                            <div style="font-weight:600; margin-top:4px;">RM ${item.price}</div>
                        </div>
                        <button onclick="removeCartItem(${item.id})" style="align-self:center; color:var(--danger); background:none; border:none; cursor:pointer;"><i class="fa-solid fa-trash"></i></button>
                    </div>
                `;
            }).join('');
            
            totalEl.innerText = `RM ${total}`;
        }

        function removeCartItem(id) {
            cart = cart.filter(i => i.id !== id);
            updateCartUI();
        }

        function toggleCart() {
            document.getElementById('cart-drawer').classList.toggle('open');
            document.getElementById('cart-overlay').classList.toggle('open');
        }

        function checkout() {
            if(cart.length === 0) return;
            let msg = "Hi SmartFix, I'd like to checkout:\n";
            cart.forEach(i => msg += `- ${i.model} (${i.cap}): RM ${i.price}\n`);
            msg += `\n*Total: RM ${cart.reduce((a,b)=>a+b.price, 0)}*`;
            window.open(`https://wa.me/60123456789?text=${encodeURIComponent(msg)}`, '_blank');
        }

        /* --- UTILS --- */
        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('active');
        }

        function toggleStart() {
            const btn = document.getElementById('start-btn');
            btn.disabled = !document.getElementById('agree-check').checked;
        }

        function closeDisclaimer() {
            const modal = document.getElementById('disclaimer-modal');
            modal.classList.remove('visible');
            setTimeout(() => modal.style.display = 'none', 500);
        }

        function showToast() {
            const t = document.getElementById('toast');
            t.classList.add('visible');
            setTimeout(() => t.classList.remove('visible'), 2500);
        }

        function renderPromos() {
            const root = document.getElementById('promo-root');
            root.innerHTML = promos.map(p => `
                <div class="promo-card">
                    <img src="${p.img}" class="promo-img">
                    <div class="promo-body">
                        <span class="promo-tag">${p.tag}</span>
                        <div class="promo-title">${p.title}</div>
                        <button onclick="nav('collection')" class="btn btn-outline" style="padding:8px 16px; font-size:0.8rem; margin-top:10px;">Learn More</button>
                    </div>
                </div>
            `).join('');
        }

        function renderLocations() {
            const root = document.getElementById('loc-grid-root');
            root.innerHTML = locations.map(l => `
                <div class="model-card fade-in-up" style="text-align:left; padding:24px; align-items:flex-start;">
                    <div style="display:flex; justify-content:space-between; width:100%; margin-bottom:12px;">
                        <span style="font-weight:700; font-size:1.2rem;">${l.name}</span>
                        <span style="background:#eee; padding:4px 8px; border-radius:6px; font-size:0.7rem; font-weight:700;">${l.tag}</span>
                    </div>
                    <p style="color:var(--text-secondary); font-size:0.95rem; line-height:1.5; margin-bottom:20px;">
                        <i class="fa-solid fa-location-dot" style="color:var(--accent); margin-right:6px;"></i> ${l.addr}
                    </p>
                    <button class="btn btn-outline" style="width:100%; font-size:0.9rem;">
                        Get Directions <i class="fa-solid fa-arrow-up-right-from-square" style="font-size:0.8rem;"></i>
                    </button>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
